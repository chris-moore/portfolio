$(document).ready(function(){
	
	$('#clickme').click(function() {
		$('#book').animate({
			opacity: 0.25,
			left: '+=50',
			height: 'toggle'
		}, 
		5000, 
		function() {
			// Animation complete.
		});
	});
	
	
	
	$("#end_back").click(function(event){
		$("#end_container").css("display", "none");
		$("#signup_button").css("visibility", "visible");
		$("#car_image").css("margin-left", "auto");
	});
	
	$("#q_answer_11").mouseover(function(event){
		$("#q_answer_11 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_11 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_11").mouseout(function(event){
		$("#q_answer_11 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_11 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_12").mouseover(function(event){
		$("#q_answer_12 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_12 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_12").mouseout(function(event){
		$("#q_answer_12 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_12 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_13").mouseover(function(event){
		$("#q_answer_13 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_13 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_13").mouseout(function(event){
		$("#q_answer_13 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_13 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_14").mouseover(function(event){
		$("#q_answer_14 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_14 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_14").mouseout(function(event){
		$("#q_answer_14 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_14 .quiz_answer").css("color", "#3e2819"); 
	});
	
	
	
	$("#q_answer_21").mouseover(function(event){
		$("#q_answer_21 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_21 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_21").mouseout(function(event){
		$("#q_answer_21 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_21 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_22").mouseover(function(event){
		$("#q_answer_22 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_22 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_22").mouseout(function(event){
		$("#q_answer_22 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_22 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_23").mouseover(function(event){
		$("#q_answer_23 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_23 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_23").mouseout(function(event){
		$("#q_answer_23 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_23 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_24").mouseover(function(event){
		$("#q_answer_24 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_24 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_24").mouseout(function(event){
		$("#q_answer_24 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_24 .quiz_answer").css("color", "#3e2819"); 
	});
	
	
	
	$("#q_answer_31").mouseover(function(event){
		$("#q_answer_31 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_31 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_31").mouseout(function(event){
		$("#q_answer_31 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_31 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_32").mouseover(function(event){
		$("#q_answer_32 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_32 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_32").mouseout(function(event){
		$("#q_answer_32 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_32 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_33").mouseover(function(event){
		$("#q_answer_33 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_33 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_33").mouseout(function(event){
		$("#q_answer_33 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_33 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_34").mouseover(function(event){
		$("#q_answer_34 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_34 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_34").mouseout(function(event){
		$("#q_answer_34 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_34 .quiz_answer").css("color", "#3e2819"); 
	});
	
	
	
	$("#q_answer_41").mouseover(function(event){
		$("#q_answer_41 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_41 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_41").mouseout(function(event){
		$("#q_answer_41 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_41 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_42").mouseover(function(event){
		$("#q_answer_42 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_42 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_42").mouseout(function(event){
		$("#q_answer_42 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_42 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_43").mouseover(function(event){
		$("#q_answer_43 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_43 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_43").mouseout(function(event){
		$("#q_answer_43 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_43 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_44").mouseover(function(event){
		$("#q_answer_44 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_44 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_44").mouseout(function(event){
		$("#q_answer_44 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_44 .quiz_answer").css("color", "#3e2819"); 
	});
	
	
	
	$("#q_answer_51").mouseover(function(event){
		$("#q_answer_51 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_51 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_51").mouseout(function(event){
		$("#q_answer_51 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_51 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_52").mouseover(function(event){
		$("#q_answer_52 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_52 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_52").mouseout(function(event){
		$("#q_answer_52 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_52 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_53").mouseover(function(event){
		$("#q_answer_53 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_53 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_53").mouseout(function(event){
		$("#q_answer_53 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_53 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_54").mouseover(function(event){
		$("#q_answer_54 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_54 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_54").mouseout(function(event){
		$("#q_answer_54 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_54 .quiz_answer").css("color", "#3e2819"); 
	});
	
	
	
	$("#q_answer_61").mouseover(function(event){
		$("#q_answer_61 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_61 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_61").mouseout(function(event){
		$("#q_answer_61 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_61 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_62").mouseover(function(event){
		$("#q_answer_62 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_62 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_62").mouseout(function(event){
		$("#q_answer_62 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_62 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_63").mouseover(function(event){
		$("#q_answer_63 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_63 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_63").mouseout(function(event){
		$("#q_answer_63 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_63 .quiz_answer").css("color", "#3e2819"); 
	});
	
	$("#q_answer_64").mouseover(function(event){
		$("#q_answer_64 .answer_box").css("background-position", "-12px 0"); 
		$("#q_answer_64 .quiz_answer").css("color", "#b42168"); 
	});
	
	$("#q_answer_64").mouseout(function(event){
		$("#q_answer_64 .answer_box").css("background-position", "0 0"); 
		$("#q_answer_64 .quiz_answer").css("color", "#3e2819"); 
	});
	
});

var quiz_box;
var dx = 0;
var x=0, y=0;
var q_index = 0;
var q_width = -1030;
var q_total = 5;
var tier0 = 0;
var tier1 = 0;
var tier2 = 0;
var tier3 = 0;

var title_arr = [
				"Forever Love.",
				"The Glass Half Full.",
				"Cautious One.",
				"The Wall."
				];

var result_fb_arr = [ 
				"<a class='postfacebook_button' rel='external' onclick='javascript:trackResultFB(\"a\");' href='http://www.facebook.com/share.php?u=http://www.thevow-movie.com/quiz/php/share.php?d=I+took+the+How+Far+Would+You+Go%3F+Quiz+and+I+am+a+Forever+Lover.+In+theaters+Valentine%27s+Day.' target='_blank'><img src='img/end_fb.png'/></a>",
				"<a class='postfacebook_button' rel='external' onclick='javascript:trackResultFB(\"b\");' href='http://www.facebook.com/share.php?u=http://www.thevow-movie.com/quiz/php/share.php?d=I+took+the+How+Far+Would+You+Go%3F+Quiz+and+My+Glass+Is+Half+Full.+In+theaters+Valentine%27s+Day.' target='_blank'><img src='img/end_fb.png'/></a>",
				"<a class='postfacebook_button' rel='external' onclick='javascript:trackResultFB(\"c\");' href='http://www.facebook.com/share.php?u=http://www.thevow-movie.com/quiz/php/share.php?d=I+took+the+How+Far+Would+You+Go%3F+Quiz+and+I+am+a+Cautious+One.+In+theaters+Valentine%27s+Day.' target='_blank'><img src='img/end_fb.png'/></a>",
				"<a class='postfacebook_button' rel='external' onclick='javascript:trackResultFB(\"d\");' href='http://www.facebook.com/share.php?u=http://www.thevow-movie.com/quiz/php/share.php?d=I+took+the+How+Far+Would+You+Go%3F+Quiz+and+I+am+The+Wall.+In+theaters+Valentine%27s+Day.' target='_blank'><img src='img/end_fb.png'/></a>"
				];

var result_tw_arr = [
				"<a class='posttwitter_button' rel='external' onclick='javascript:trackResultTW(\"http://twitter.com/home?status=I%20took%20%40thevowmovie%20How%20Far%20Would%20You%20Go%3F%20Quiz%20and%20I%20am%20a%20Forever%20Lover.%20In%20theaters%20Valentine%27s%20Day.%20http%3A%2F%2Fwww.TheVow-Movie.com%2Fquiz\");' href='http://twitter.com/home?status=I%20took%20%40thevowmovie%20How%20Far%20Would%20You%20Go%3F%20Quiz%20and%20I%20am%20a%20Forever%20Lover.%20In%20theaters%20Valentine%27s%20Day.%20http%3A%2F%2Fwww.TheVow-Movie.com%2Fquiz' target='_blank'><img src='img/end_twitter.png'/></a>",
				"<a class='posttwitter_button' rel='external' onclick='javascript:trackResultTW(\"http://twitter.com/home?status=I%20took%20%40thevowmovie%20How%20Far%20Would%20You%20Go%3F%20Quiz%20and%20My%20Glass%20Is%20Half%20Full.%20In%20theaters%20Valentine%27s%20Day.%20http%3A%2F%2Fwww.TheVow-Movie.com%2Fquiz\");' href='http://twitter.com/home?status=I%20took%20%40thevowmovie%20How%20Far%20Would%20You%20Go%3F%20Quiz%20and%20My%20Glass%20Is%20Half%20Full.%20In%20theaters%20Valentine%27s%20Day.%20http%3A%2F%2Fwww.TheVow-Movie.com%2Fquiz' target='_blank'><img src='img/end_twitter.png'/></a>",
				"<a class='posttwitter_button' rel='external' onclick='javascript:trackResultTW(\"http://twitter.com/home?status=I%20took%20%40thevowmovie%20How%20Far%20Would%20You%20Go%3F%20Quiz%20and%20I%20am%20a%20Cautious%20One.%20In%20theaters%20Valentine%27s%20Day.%20http%3A%2F%2Fwww.TheVow-Movie.com%2Fquiz\");' href='http://twitter.com/home?status=I%20took%20%40thevowmovie%20How%20Far%20Would%20You%20Go%3F%20Quiz%20and%20I%20am%20a%20Cautious%20One.%20In%20theaters%20Valentine%27s%20Day.%20http%3A%2F%2Fwww.TheVow-Movie.com%2Fquiz' target='_blank'><img src='img/end_twitter.png'/></a>",
				"<a class='posttwitter_button' rel='external' onclick='javascript:trackResultTW(\"http://twitter.com/home?status=I%20took%20%40thevowmovie%20How%20Far%20Would%20You%20Go%3F%20Quiz%20and%20I%20am%20The%20Wall.%20In%20theaters%20Valentine%27s%20Day.%20http%3A%2F%2Fwww.TheVow-Movie.com%2Fquiz\");' href='http://twitter.com/home?status=I%20took%20%40thevowmovie%20How%20Far%20Would%20You%20Go%3F%20Quiz%20and%20I%20am%20The%20Wall.%20In%20theaters%20Valentine%27s%20Day.%20http%3A%2F%2Fwww.TheVow-Movie.com%2Fquiz' target='_blank'><img src='img/end_twitter.png'/></a>"
				];

var image_arr = [
				"<img src='img/end_image0.png'/>", 
				"<img src='img/end_image1.png'/>", 
				"<img src='img/end_image2.png'/>", 
				"<img src='img/end_image3.png'/>"
				];

var description_arr = [
				"You would go to the ends of the earth for love. Thereâ€™s no mountain you wouldnâ€™t climb, and no ocean you wouldnâ€™t swim. This may have gotten you hurt in the past, but that doesnâ€™t matter because being in love is the best thing anyone can do.",
				"You would go pretty far for love. Youâ€™re still pretty practical even though you love being in love. You donâ€™t go nuts over just anyone, but youâ€™re fully willing to go the extra mile for the right person.",
				"Youâ€™d meet love halfway. Maybe youâ€™ve been burned one too many times, or maybe youâ€™re just naturally cautious. Youâ€™re not opposed to love, but you know that the door can swing both ways.",
				"Loveâ€™s gotta come to you. Your guard is up, but thatâ€™s just called being realistic. Your heart isnâ€™t a toy, and you donâ€™t treat it that way. But while itâ€™s good to protect yourself, sometimes you wonder if youâ€™re too shut off. "
				];

function scrollQuiz () {
	
	hideQuestions();
	quiz_box = document.getElementById("quiz");
	
	q_index++;
	dx = q_index * q_width;
	
	if(q_index <= q_total) {
	
		// Normal next question routine
		$("#question"+q_index).css("opacity", "1");
		$("#progress_dots").css("background-position", "0px "+(q_index*-10)+"px");
		document.getElementById('status_text').innerHTML = (q_index+1) + " of " + (q_total+1);
		
		var track_q = q_index + 1;
		
		s.pageName="us:movies:thevow:feature:quiz:question"+track_q+".html"; 
		s.t();
	
	} else {
	
		// after last question show results, hide progress indicator
		$("#progress_indicator").css("visibility", "hidden");
		$("#results_screen").css("display", "block");
		$("#results_screen").css("visibility", "visible");
		//$("#results_screen").css("opacity", "1.0");
		$('#results_screen').animate({ opacity: 1.0 }, 800,  function() { });
		
		var top_tier = Math.max(tier0, tier1, tier2, tier3);
		
		if(top_tier == tier0) {
			defineResults(0);
		} else if(top_tier == tier1) {
			defineResults(1);
		} else if(top_tier == tier2) {
			defineResults(2);
		} else {
			defineResults(3);
		}
		
		// tracking
		s.pageName="us:movies:thevow:feature:quiz:results.html"; 
		s.t();
	}
	
	moveIt();
}

function startButtonClick() {
	
	s.pageName="us:movies:thevow:feature:quiz:question1.html"; 
	s.t();
	
	$('#intro').animate({ opacity: 0.0 }, 400,  function() {
		$("#intro").css("display", "none");
		$("#intro").css("visibility", "hidden");
		$("#quiz_wrapper").css("visibility", "visible");
		$("#quiz_wrapper").css("opacity", "0");
		$("#quiz_wrapper").animate({ opacity: 1.0 }, 400,  function() { });
	});
}

function replayButtonClick() {
	q_index = 0;
	tier0 = 0;
	tier1 = 0;
	tier2 = 0;
	tier3 = 0;
	dx = 0;
	x = 0;
	
	s.pageName="us:movies:thevow:feature:quiz:question1.html";
	s.t();
	
	javascript:trackFeaturedContentClick('replay_button');
	
	$('#results_screen').animate({ opacity: 0.0 }, 400,  function() {
		$("#results_screen").css("display", "none");
		$("#results_screen").css("visibility", "hidden");
		
		moveIt();
		$("#question"+q_index).animate({ opacity: 1.0 }, 400,  function() { });
		$("#progress_dots").css("background-position", "0px "+(q_index*-10)+"px");
		document.getElementById('status_text').innerHTML = (q_index+1) + " of " + (q_total+1);
		$("#progress_indicator").css("visibility", "visible");
	});
}

function answerClick(tier, answer) {
	switch(tier) {
		case 0 : tier0++; break;
		case 1 : tier1++; break;
		case 2 : tier2++; break;
		case 3 : tier3++; break;
	}
	
	var track_q = q_index + 1;
	
	scrollQuiz();
}

function trackFeaturedContentClick(track) {
	sCode.trackFeaturedContentClick(window.location.href, track);
}

function trackOutboundClick(url, track) {
	sCode.trackOutboundClick(url, track);
}

function trackResultFB(track) {
	trackOutboundClick("http://www.facebook.com/share.php?u=http://www.TheVow-Movie.com/quiz/result"+track+".html", "postfacebook_button");
}

function trackResultTW(track) {
	trackOutboundClick(track, "posttwitter_button");
}

function answerOver(ans) {
	$("#answer_box_"+ans).css("background-position", "12px 0");
	$("#answer_text_"+ans).css("color", "#b42168");
}

function answerOut(ans) {
	$("#answer_box_"+ans).css("background-position", "0 0");
	$("#answer_text_"+ans).css("color", "#3e2819");
}

function defineResults(tier) {
	document.getElementById('results_image').innerHTML = image_arr[tier];
	document.getElementById('results_title').innerHTML = title_arr[tier];
	document.getElementById('results_twitter').innerHTML = result_tw_arr[tier];
	document.getElementById('results_facebook').innerHTML = result_fb_arr[tier];
	document.getElementById('results_description').innerHTML = description_arr[tier];
}

function hideQuestions() {
	$("#question0").css("opacity", "0");
	$("#question1").css("opacity", "0");
	$("#question2").css("opacity", "0");
}

window.requestAnimFrame = (function() {
	return  window.requestAnimationFrame	|| 
	window.webkitRequestAnimationFrame || 
	window.mozRequestAnimationFrame    || 
	window.oRequestAnimationFrame      || 
	window.msRequestAnimationFrame     || 
	function(callback, element) {
		window.setTimeout(callback, 1000 / 60);
	};
})();

function moveIt() {
	quiz_box = document.getElementById("quiz");
	x += (dx - x) * 0.15;
	quiz_box.style.left = x + "px";
	
	document.body.clientWidth
	
	if(Math.abs(x - dx) > 1) {
		requestAnimFrame(moveIt, quiz_box);
	}
}